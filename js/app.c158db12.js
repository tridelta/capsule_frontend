(function(){"use strict";var e={8020:function(e,a,t){var o=t(5130),n=(t(4114),t(6768)),l=t(144);const r="http://localhost:5201";var u=r,c=t(4232),i=t(1527),s=t.n(i),d=t(819);const v={class:"quark"},p={key:0,class:"quark-icon"},f={class:"quark-body"},m={class:"quark-content"},k={key:0},g=["src"],y={key:0,class:"quark-transcript"},b=["hidden"],h={class:"popup-bigimg"},F=["src"];function C(e){this.trans_content=e}const _={name:"QuarkViewer"};var w=Object.assign(_,{props:{quarkID:String,displayTrans:Boolean,displayAvatar:Boolean},setup(e){const a={loading:{icon:"refresh",color:"#808080"},text:{icon:"translate",color:"var(--color-primary)"},image:{icon:"image",color:"var(--color-success)"},"transcript/info":{icon:"information",color:"#808080"},"transcript/explain":{icon:"message-text-outline",color:"#808080"}},t=e;var o=(0,l.KR)("");const r=(0,l.KR)(!1),i=(0,l.KR)({id:"Q-1",type:"text",content:"Loading ...",transcripts:[]}),s=(0,l.KR)(a.loading);function _(){const e=`${u}/quark/${t.quarkID}`;fetch(e).then((e=>e.json())).then((e=>{i.value=e.quark,s.value=a[e.quark.type]}))}return _(),(e,_)=>{const w=(0,n.g2)("var-icon"),R=(0,n.g2)("var-avatar"),q=(0,n.g2)("var-divider"),E=(0,n.g2)("var-avatar-group"),L=(0,n.g2)("var-popup");return(0,n.uX)(),(0,n.CE)("div",v,[t.displayAvatar?((0,n.uX)(),(0,n.CE)("div",p,[(0,n.bF)(R,{round:!1,size:"small",color:s.value.color},{default:(0,n.k6)((()=>[(0,n.bF)(w,{name:s.value.icon},null,8,["name"])])),_:1},8,["color"])])):(0,n.Q3)("",!0),(0,n.Lk)("div",f,[(0,n.Lk)("div",m,["text"==i.value.type?((0,n.uX)(),(0,n.CE)("div",k,[(0,n.bF)((0,l.R1)(d.f),{content:i.value.content},null,8,["content"])])):(0,n.Q3)("",!0),"image"==i.value.type?((0,n.uX)(),(0,n.CE)("img",{key:1,onClick:_[0]||(_[0]=e=>r.value=!0),src:`${(0,l.R1)(u)}${i.value.content}`},null,8,g)):(0,n.Q3)("",!0)]),t.displayTrans&&0!=i.value.transcripts.length?((0,n.uX)(),(0,n.CE)("div",y,[(0,n.bF)(q,{dashed:""}),(0,n.bF)(E,null,{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value.transcripts,(e=>((0,n.uX)(),(0,n.Wv)(R,{key:e.id,onClick:a=>C(e.content),hoverable:"",bordered:"",size:"small",color:a[e.type].color},{default:(0,n.k6)((()=>[(0,n.bF)(w,{name:a[e.type].icon},null,8,["name"])])),_:2},1032,["onClick","color"])))),128)),""!=(0,l.R1)(o)?((0,n.uX)(),(0,n.Wv)(R,{key:0,onClick:_[1]||(_[1]=e=>C("")),hoverable:"",size:"small",color:"var(--color-error)"},{default:(0,n.k6)((()=>[(0,n.bF)(w,{name:"window-close",color:"var(--color-danger)"})])),_:1})):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("p",{class:"trans-show markdown",hidden:!(0,l.R1)(o)},(0,c.v_)((0,l.R1)(o)),9,b)])):(0,n.Q3)("",!0)]),(0,n.bF)(L,{show:r.value,"onUpdate:show":_[2]||(_[2]=e=>r.value=e)},{default:(0,n.k6)((()=>[(0,n.Lk)("div",h,[(0,n.Lk)("img",{class:"bigimg",src:`${(0,l.R1)(u)}${i.value.content}`},null,8,F)])])),_:1},8,["show"])])}}}),R=t(1241);const q=(0,R.A)(w,[["__scopeId","data-v-759236c8"]]);var E=q,L=t(3080),x=t(8484);const O={key:0,class:"mask"},X={class:"qtype-choose noselect"},j={class:"content-editor"},K={key:0},A={key:1},Q={class:"footer-controller"},V={name:"QuarkEditDialog",props:{activate:Boolean,add_quark:Function,closeDialog:Function}};var D=Object.assign(V,{setup(e){const a=(0,l.KR)("text"),t=(0,l.KR)([{label:"Text",value:"text"},{label:"Media",value:"media"}]),o=(0,l.KR)(""),r=(0,l.KR)([]);function c(e){function a(){o.value="",r.value=[],e()}0!=o.value.length||0!=r.value.length?(0,L.Ay)({title:"退出编辑",message:"您有更改尚未保存，推出编辑将丢失更改。确定要退出吗？",confirmButtonText:"退出",cancelButtonText:"继续编辑",onConfirm:a}):a()}function i(e){}async function s(e,a){const t=`${u}/quark`,o=new FormData;o.append("type",e),o.append("content",a);var n=await fetch(t,{method:"POST",body:o});return n.json()}function v(e,a){x.Ay[e](a)}async function p(e,t){var n=[];if("text"===a.value){let t=await s(a.value,o.value);0!=t.code&&v("error","Upload Failed (createQuark."+t.code+")."),n.push(t.quark_id),v("success","Upload Success."),e()}else if("media"===a.value){for(var l=0;l<r.value.length;l++){var u=r.value[l],c=u.file.type.split("/")[0];if("image"!=c&&"video"!=c)return void v("error","Invalid File Type.");let e=await s(c,u.file);if(0!=e.code)return void v("error","Upload Failed (createQuark."+e.code+").");n.push(e.quark_id),u.status="success"}v("success","Upload Success."),e()}t(n)}return(u,s)=>{const v=(0,n.g2)("var-icon"),f=(0,n.g2)("var-button"),m=(0,n.g2)("var-radio-group"),k=(0,n.g2)("var-uploader"),g=(0,n.g2)("var-paper");return e.activate?((0,n.uX)(),(0,n.CE)("div",O,[(0,n.bF)(g,{class:"content"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{type:"danger",round:"","icon-container":"",class:"close-button",onClick:s[0]||(s[0]=a=>c(e.closeDialog))},{default:(0,n.k6)((()=>[(0,n.bF)(v,{name:"window-close"})])),_:1}),s[6]||(s[6]=(0,n.Lk)("h2",{class:"noselect"},"New Quark",-1)),(0,n.Lk)("div",X,[(0,n.bF)(m,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),options:t.value},null,8,["modelValue","options"])]),(0,n.Lk)("div",j,["text"===a.value?((0,n.uX)(),(0,n.CE)("div",K,[(0,n.bF)((0,l.R1)(d.t),{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=e=>o.value=e)},null,8,["modelValue"])])):(0,n.Q3)("",!0),"media"===a.value?((0,n.uX)(),(0,n.CE)("div",A,[(0,n.bF)(k,{modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=e=>r.value=e),multiple:!0,accept:"image/*,video/*",onAfterRead:i},null,8,["modelValue"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Q,[(0,n.bF)(f,{type:"success",class:"btn-upload",onClick:s[4]||(s[4]=a=>p(e.closeDialog,e.add_quark))},{default:(0,n.k6)((()=>s[5]||(s[5]=[(0,n.eW)("Save")]))),_:1})])])),_:1})])):(0,n.Q3)("",!0)}}});const U=(0,R.A)(D,[["__scopeId","data-v-774a8d3e"]]);var I=U;const T={key:0,class:"atom"},$={class:"atom-head"},S={key:0},W={key:1,class:"edittitle"},M=["onClick"],B={key:1,class:"add-tag-inputs"},P={class:"atom-info"},N={class:"atom-info"},z={class:"atom-contents"},J={class:"quarks-container"},G={class:"drag-handle"},H={class:"rm-handle"},Y={name:"AtomEditView"};var Z=Object.assign(Y,{props:{atomID:String,tempAtom:Boolean,atomUpd:Function},setup(e){const a=e,t=(0,l.KR)(!1);function r(e){var a=new Date(e),t=new Date,o=t-a;if(o<36e5)return Math.floor(o/6e4)+" minutes ago";if(o<864e5)return Math.floor(o/36e5)+" hours ago";if(o<6048e5){var n=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"];return n[a.getDay()]}return a.toLocaleString()}const i=(0,l.KR)("content-copy");function d(e){i.value="check",navigator.clipboard.writeText(e),setTimeout((()=>{i.value="content-copy"}),1e3)}const v=(0,l.KR)(!1),p=(0,l.KR)("");function f(){v.value=!0}function m(){R.value.title=p.value,X(),k()}function k(){p.value="",v.value=!1}const g=(0,l.KR)(!1),y=(0,l.KR)("");function b(){g.value=!0}function h(){R.value.tags.push(y.value),X(),F()}function F(){y.value="",g.value=!1}function C(e){var a=R.value.tags.indexOf(e);R.value.tags.splice(a,1),X()}function _(e){var a=R.value.contents.indexOf(e);R.value.contents.splice(a,1),X()}function w(){if(a.tempAtom)R.value={title:"New Atom",tags:[],id:"A-new",last_modify:"Just Now",contents:[]};else{var e=`${u}/atom/${a.atomID}`;fetch(e).then((e=>e.json())).then((e=>{R.value=e.atom}))}}const R=(0,l.KR)({title:"Loading ..."});function q(){X()}function L(){t.value=!0}function O(e){for(var a=0;a<e.length;a++)R.value.contents.push(e[a]);X()}function X(){var e=`${u}/atom/${R.value.id}/edit`;fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:R.value.title,tags:R.value.tags,quarks:R.value.contents})}).then((e=>e.json())).then((e=>{0==e.code?a.atomUpd&&a.atomUpd(e.atom_id):(x.Ay.error("Update Failed (atom.editquark."+e.code+")."),console.log("Error: "+e.message))}))}return w(),(e,a)=>{const u=(0,n.g2)("var-icon"),w=(0,n.g2)("var-input"),x=(0,n.g2)("var-badge"),X=(0,n.g2)("var-space"),j=(0,n.g2)("var-paper"),K=(0,n.g2)("var-button");return(0,n.uX)(),(0,n.CE)(n.FK,null,[R.value?((0,n.uX)(),(0,n.CE)("div",T,[(0,n.Lk)("div",$,[v.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("h1",S,[(0,n.eW)((0,c.v_)(R.value.title)+" ",1),(0,n.bF)(u,{name:"grey mdi mdi-pencil",onClick:f})])),v.value?((0,n.uX)(),(0,n.CE)("div",W,[(0,n.bF)(w,{placeholder:R.value.title,modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),autofocus:!0,onKeydown:[(0,o.jR)(m,["enter"]),(0,o.jR)(k,["escape"])]},null,8,["placeholder","modelValue"]),(0,n.bF)(u,{onClick:m,name:"checkbox-marked-circle",color:"var(--color-success)"}),(0,n.bF)(u,{onClick:k,name:"close-circle",color:"var(--color-danger)"})])):(0,n.Q3)("",!0),(0,n.bF)(X,null,{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(R.value.tags,(e=>((0,n.uX)(),(0,n.CE)("div",{class:"atom-tag",key:e,onClick:a=>C(e)},[(0,n.bF)(x,{value:e+" ×",type:"primary"},null,8,["value"])],8,M)))),128)),g.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(x,{key:0,value:"+",type:"info",onClick:b})),g.value?((0,n.uX)(),(0,n.CE)("div",B,[g.value?((0,n.uX)(),(0,n.Wv)(w,{key:0,size:"small",placeholder:"New Tag",autofocus:!0,modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value=e),onKeydown:[(0,o.jR)(h,["enter"]),(0,o.jR)(F,["escape"])]},null,8,["modelValue"])):(0,n.Q3)("",!0),(0,n.bF)(u,{onClick:h,name:"checkbox-marked-circle",color:"var(--color-success)"}),(0,n.bF)(u,{onClick:F,name:"close-circle",color:"var(--color-danger)"})])):(0,n.Q3)("",!0)])),_:1}),a[3]||(a[3]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("li",P,[(0,n.eW)("ID: "+(0,c.v_)(R.value.id)+" ",1),(0,n.bF)(u,{name:i.value,onClick:a[2]||(a[2]=e=>d(R.value.id))},null,8,["name"])]),(0,n.Lk)("li",N,"Last Modified: "+(0,c.v_)(r(R.value.last_modify)),1)]),(0,n.Lk)("div",z,[a[5]||(a[5]=(0,n.Lk)("h3",null,"Contents",-1)),(0,n.Lk)("div",J,[(0,n.bF)((0,l.R1)(s()),{list:R.value.contents,animation:"200","item-key":e=>e,"ghost-class":"ghost",handle:".drag-handle,.quark-icon",onEnd:q},{item:(0,n.k6)((({element:e})=>[(0,n.bF)(j,{class:"quark-container",elevation:1},{default:(0,n.k6)((()=>[(0,n.Lk)("div",G,[(0,n.bF)(u,{name:"menu",color:"grey"})]),(0,n.bF)(E,{quarkID:e,"display-avatar":!0,"display-trans":!0},null,8,["quarkID"]),(0,n.Lk)("div",H,[(0,n.bF)(u,{name:"delete",color:"var(--color-danger)",onClick:a=>_(e)},null,8,["onClick"])])])),_:2},1024)])),footer:(0,n.k6)((()=>[(0,n.bF)(K,{onClick:L,type:"primary"},{default:(0,n.k6)((()=>a[4]||(a[4]=[(0,n.eW)("+ Quark")]))),_:1})])),_:1},8,["list","item-key"])])])])):(0,n.Q3)("",!0),(0,n.Lk)("div",null,[(0,n.bF)(I,{activate:t.value,add_quark:O,"close-dialog":()=>t.value=!1},null,8,["activate","close-dialog"])])],64)}}});const ee=(0,R.A)(Z,[["__scopeId","data-v-397d8364"]]);var ae=ee;t(8111),t(7588),t(1701);const te=["data-aid"],oe={class:"atom-head"},ne={class:"atom-info"},le={class:"atom-info"},re={name:"AtomCardView"};Boolean;const ue={class:"atom-container"},ce={class:"controllers"},ie={name:"App"};var se=Object.assign(ie,{setup(e){const a=(0,l.KR)(["?-loading"]);function t(){const e=`${u}/atom_list`;fetch(e).then((e=>e.json())).then((e=>{a.value=e.atom_list}))}function o(){var e=`?-${Math.random()}-${performance.now()}`;a.value.push(e)}function r(e){function t(t){if(console.log("Atom Updated: "+t),"?"==e[0]){var o=a.value.indexOf(e);a.value[o]=t}}return t}return t(),(e,t)=>{const l=(0,n.g2)("var-paper"),u=(0,n.g2)("var-space"),c=(0,n.g2)("var-button");return(0,n.uX)(),(0,n.CE)("div",ue,[(0,n.bF)(u,{direction:"column",wrap:"wrap"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(e=>((0,n.uX)(),(0,n.Wv)(l,{elevation:2,key:e},{default:(0,n.k6)((()=>[(0,n.bF)(ae,{atomID:e,tempAtom:"?"==e[0],atomUpd:r(e)},null,8,["atomID","tempAtom","atomUpd"])])),_:2},1024)))),128))])),_:1}),(0,n.Lk)("div",ce,[(0,n.bF)(c,{type:"primary",onClick:t[0]||(t[0]=e=>o())},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("+ Atom")]))),_:1})])])}}});const de=se;var ve=de,pe=t(286),fe=(t(1710),(0,o.Ef)(ve));fe.use(pe.Ay$),fe.mount("#app")}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var l=a[o]={exports:{}};return e[o].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(a,o,n,l){if(!o){var r=1/0;for(s=0;s<e.length;s++){o=e[s][0],n=e[s][1],l=e[s][2];for(var u=!0,c=0;c<o.length;c++)(!1&l||r>=l)&&Object.keys(t.O).every((function(e){return t.O[e](o[c])}))?o.splice(c--,1):(u=!1,l<r&&(r=l));if(u){e.splice(s--,1);var i=n();void 0!==i&&(a=i)}}return a}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[o,n,l]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,o){var n,l,r=o[0],u=o[1],c=o[2],i=0;if(r.some((function(a){return 0!==e[a]}))){for(n in u)t.o(u,n)&&(t.m[n]=u[n]);if(c)var s=c(t)}for(a&&a(o);i<r.length;i++)l=r[i],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(s)},o=self["webpackChunkcapsule_frontend"]=self["webpackChunkcapsule_frontend"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(8020)}));o=t.O(o)})();
//# sourceMappingURL=app.c158db12.js.map